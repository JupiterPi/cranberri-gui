<div id="container">

  <ng-container *ngIf="!isInstalled">

    <h2>Install</h2>
    <button class="button primary-button" (click)="install()">
      Install Paper & Cranberri Plugin
      <span class="loader" *ngIf="installLoading"></span>
    </button>

  </ng-container>
  <ng-container *ngIf="isInstalled">

    <h2>Updates</h2>
    <div class="lines">
      <div>
        Cranberri GUI:
        <span [class]="needsUpdate?.cranberriGui ? 'warn' : 'ok'">{{updateInfo?.cranberriGuiVersion}}</span>
        <ng-container *ngIf="needsUpdate?.cranberriGui">
          -> {{currentVersions?.cranberriGuiVersion}}
        </ng-container>
      </div>
      <div>
        Paper:
        <span [class]="needsUpdate?.updatePaper ? 'warn' : 'ok'">{{updateInfo?.paperVersion}}</span>
        <span *ngIf="updateInfo?.paperVersion != currentVersions?.paperVersion" class="muted"> ({{currentVersions?.paperVersion}})</span>
        <ng-container *ngIf="needsUpdate?.updatePaper">
          -> {{currentVersions?.paperVersion}}
        </ng-container>
      </div>
      <div>
        Cranberri Server Plugin:
        <span [class]="needsUpdate?.updatePlugin ? 'warn' : 'ok'">{{updateInfo?.pluginVersion}}</span>
        <ng-container *ngIf="needsUpdate?.updatePlugin">
          -> {{currentVersions?.pluginVersion}}
        </ng-container>
      </div>
    </div>
    <!--TODO open links in browser instead of Electron window -->
    <p *ngIf="needsUpdate?.cranberriGui">
      To update Cranberri GUI:
      Visit on GitHub <a target="_blank" href="https://github.com/JupiterPi/cranberri-gui/releases/latest">JupiterPi/cranberri-gui -> Releases</a>
      and download the bundle under the latest release's assets.
      Replace the current installation and restart Cranberri to apply changes.
    </p>
    <p *ngIf="needsUpdate?.updatePaper">
      To update Paper:
      Visit <a target="_blank" href="https://papermc.io/downloads/paper">PaperMC -> Downloads</a>
      or <a target="_blank" href="https://papermc.io/downloads/all">-> Build Explorer</a>
      and locate the required version. Replace the current file and restart Cranberri to apply changes.
    </p>
    <p *ngIf="needsUpdate?.updatePlugin">
      To update the Cranberri Server Plugin:
      Visit on GitHub <a target="_blank" href="https://github.com/JupiterPi/cranberri/releases/latest">JupiterPi/cranberri -> Releases</a>
      and download cranberri-server-plugin-v{{currentVersions?.pluginVersion}}.jar (or similar) under the latest release's assets.
      Replace the current file and restart Cranberri to apply changes.
    </p>

  </ng-container>

</div>
